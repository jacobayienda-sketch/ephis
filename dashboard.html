<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EPHIS Portal</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    header {
      background: #00695c;
      color: white;
      padding: 1rem;
      text-align: center;
      font-weight: 600;
    }
    main {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      padding: 1.5rem;
      max-width: 900px;
      margin: auto;
    }
    a.module-link {
      display: block;
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      text-align: center;
      text-decoration: none;
      color: #00695c;
      font-size: 1.1rem;
      font-weight: 600;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    a.module-link:hover {
      transform: translateY(-3px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      color: #555;
      padding: 1rem 0 2rem;
    }
    button#logoutBtn {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background: #d32f2f;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 0.7rem 1.2rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    button#logoutBtn:hover {
      background: #b71c1c;
    }
  </style>
</head>

<body>
  <header>EPHIS Portal</header>

  <main>
    <a href="inspections.html" class="module-link">Inspections</a>
    <a href="complaints.html" class="module-link">Complaints</a>
    <a href="premises_management.html" class="module-link">Premises</a>
    <a href="food_safety_inspection.html" class="module-link">Food Safety</a>
    <a href="vector_surveillance.html" class="module-link">Vector Surveillance</a>
    <a href="waste_management.html" class="module-link">Waste Management</a>
    <a href="water_quality.html" class="module-link">Water Quality</a>
  </main>

  <footer>
    EPHIS Â© 2025 Elgeyo Marakwet County<br>
    Department of Health Services
  </footer>

  <button id="logoutBtn">Logout</button>

  <script type="module">
    import { supabase } from "./supabaseClient.js";
    const { data:{ session } } = await supabase.auth.getSession();
    if (!session) window.location = "login.html";
    document.getElementById("logoutBtn").onclick = async () => {
      await supabase.auth.signOut();
      window.location = "login.html";
    };
  </script>
</body>
</html>
